<div class="star-rating-wrapper">
  <a routerLink="/" class="back-link">&larr; Back to Catalog</a>

  <h2>Star Rating Component</h2>
  <p>Click or hover to select a rating.</p>

  <div class="stars-container" [class.read-only]="readOnly()" (mouseleave)="onMouseLeave()">
    @for (starValue of stars(); track starValue) {
    <span class="star" [class.filled]="isStarFilled(starValue)" [class.half-filled]="isStarHalfFilled(starValue)"
      (click)="selectRating(starValue)" [attr.aria-label]="starValue + ' out of ' + totalStars() + ' stars'"
      (mouseover)="onStarHover(starValue, $event)">
      &#9733;
    </span>
    }
  </div>

  @if (!readOnly()) {
  <button class="clear-button" (click)="clearRating()">Clear Rating</button>
  }

  <div class="current-selection">
    Current Rating: <strong>{{ currentRating() | number:'1.0-1' }}</strong> / {{ totalStars() }} <p>Hover Rating: {{
      hoverRating() | number:'1.0-1' }}</p>
  </div>

  <div class="component-controls">
    <h3>Component Controls (for demo)</h3>
    <label>
      Total Stars:
      <input type="number" [(ngModel)]="totalStars" min="1" max="10">
    </label>
    <label>
      Read Only:
      <input type="checkbox" [(ngModel)]="readOnly">
    </label>
    <label> Allow Half Stars:
      <input type="checkbox" [(ngModel)]="allowHalfStars">
    </label>
  </div>
</div>