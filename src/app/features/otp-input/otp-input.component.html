<div class="page-container">
    <a routerLink="/" class="back-link">&larr; Back to Catalog</a>
    <h2 class="page-title">Enter OTP</h2>
    <p class="page-sub-title">Please enter the 6-digit OTP sent to your mobile number.</p>

    <div class="otp-inputs-wrapper">
        @for (digit of otpDigits(); track $index) {
        <input #otpInput [type]="isMasked() ? 'password' : 'text'" inputmode="numeric" pattern="[0-9]*" maxlength="1"
            [value]="digit" (input)="handleInput($event, $index)" (keydown)="handleKeyDown($event, $index)"
            (paste)="handlePaste($event, $index)" [attr.aria-label]="'OTP digit ' + ($index + 1) + ' of ' + otpLength"
            tabindex="0" />
        }
    </div>

    <mat-checkbox [(ngModel)]="isMasked">
        Mask OTP
    </mat-checkbox>

    @if (isOtpValid()) {
    <div class="otp-success-message">
        <p>&#10004; OTP Entered Successfully!</p>
        <p>Entered OTP: <strong>{{ enteredOtp() }}</strong></p>
        <button class="clear-button" (click)="clearOtp()">Clear OTP</button>
    </div>
    }
</div>